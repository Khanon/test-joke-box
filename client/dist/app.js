(()=>{"use strict";var t={3269:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;e.Logger=class{static info(t,...e){console.log(this.msgParams(t,e))}static warn(t,...e){console.log("Warning!! - "+this.msgParams(t,e))}static error(t,...e){console.log("Error!! - "+this.msgParams(t,e))}static msgParams(t,e){return e.forEach((e=>{t+=" "+e})),t}}},8492:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StateMachine=void 0;e.StateMachine=class{constructor(t,e){this.elements=t,this.appNotify=e}set(t){this.currentState=t,this.currentState.start(this.elements,this.appNotify)}}},5606:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0;e.State=class{start(t,e){this.elements=t,this.appNotify=e,this.onStart()}}},3766:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AppNotifications=void 0,function(t){t[t.INTRO_END=0]="INTRO_END",t[t.JOKE_END=1]="JOKE_END"}(e.AppNotifications||(e.AppNotifications={}))},8425:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AppStates=void 0,function(t){t[t.INTRO=0]="INTRO",t[t.SHOW_SETUP=1]="SHOW_SETUP",t[t.SHOW_PUNCHLINE=2]="SHOW_PUNCHLINE",t[t.END_JOKE=3]="END_JOKE"}(e.AppStates||(e.AppStates={}))},5833:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StateJokeSetup=void 0;const s=o(5606);class i extends s.State{constructor(t){super(),this.joke=t}onStart(){}}e.StateJokeSetup=i},3990:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StateJokeboxIntro=void 0;const s=o(5606);class i extends s.State{onStart(){this.elements.jokeboxTitleContainer.style.display="block",this.elements.jokeboxTitle.classList.add("fade-in-slide-left-800"),setTimeout((()=>this.elements.jokeboxTitle.classList.remove("fade-in-slide-left-800")),800),setTimeout((()=>{this.elements.jokeboxTitleContainer.style.top="13%"}),1e3)}}e.StateJokeboxIntro=i}},e={};function o(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,o),n.exports}(()=>{const t=o(3269),e=o(8492),s=o(3990),i=o(3766),n=o(5833),r=o(8425);class a{setState(t){this.state=t}getState(){return this.state}start(){t.Logger.info("App started."),this.elements={jokeboxTitleContainer:document.getElementById("jokebox-title-container"),jokeboxTitle:document.getElementById("jokebox-title")},this.getNextJoke(),this.states=new e.StateMachine(this.elements,(t=>this.notify(t))),this.setState(r.AppStates.INTRO),setTimeout((()=>this.states.set(new s.StateJokeboxIntro)),300)}notify(t){switch(t){case i.AppNotifications.INTRO_END:this.showNextJokeSetup();break;case i.AppNotifications.JOKE_END:this.setState(r.AppStates.END_JOKE)}}showNextJokeSetup(){t.Logger.info("Show next joke:",JSON.stringify(this.nextJoke)),this.setState(r.AppStates.SHOW_SETUP),this.nextJoke?(this.currentJoke=this.nextJoke,this.nextJoke=void 0,this.getNextJoke(),this.hideConnecting(),this.states.set(new n.StateJokeSetup(this.currentJoke))):(this.showConnecting(),setTimeout((()=>this.showNextJokeSetup()),5e3))}getNextJoke(){t.Logger.info("Request next joke from 'http://localhost:3000/randomJoke'"),fetch("http://localhost:3000/randomJoke").then((e=>{e.ok?e.json().then((e=>{try{t.Logger.info("Got next joke:",JSON.stringify(e)),this.nextJoke={id:e[0].id,type:e[0].type,setup:e[0].setup,punchline:e[0].punchline}}catch(t){this.getNextJokeError()}})).catch((t=>{this.getNextJokeError()})):this.getNextJokeError()})).catch((t=>{this.getNextJokeError()}))}getNextJokeError(){t.Logger.error("Couldn't get Joke from server, retrying in 5 seconds..."),setTimeout((()=>this.getNextJoke()),5e3)}showConnecting(){}hideConnecting(){}}(new a).start()})()})();